
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PencilPros | Checkout</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <h1>PencilPros</h1>
    <nav>
        <a href="index.html">Home</a>
        <a href="cart.html">Cart (<span id="cart-count">0</span>)</a>
    </nav>
</header>

<main>
    <h2>Checkout</h2>

    <div id="order-summary"></div>

    <form id="checkout-form" class="checkout-form">
        <label>Name on Card</label>
        <input type="text" id="card-name" required>

        <label>Card Number</label>
        <input type="text" id="card-number" minlength="16" maxlength="16" required>

        <label>Expiration (MM/YY)</label>
        <input type="text" id="exp" placeholder="09/27" required>

        <label>CVV</label>
        <input type="text" id="cvv" minlength="3" maxlength="4" required>

        <button type="submit">Submit Order</button>
    </form>

    <p id="confirmation" style="display:none; font-size:1.2rem; font-weight:bold; margin-top:20px;">
        Order Submitted! Thank you for shopping with PencilPros.
    </p>
</main>

<script>
const products = [
    { id: 0, name: "UltraSmooth Pencil", price: 2.99, img: "assets/pencil.jpg" },
    { id: 1, name: "Premium Notebook", price: 7.49, img: "assets/notebook.jpg" },
    { id: 2, name: "Gel Pen Set", price: 5.99, img: "assets/pens.jpg" },
    { id: 3, name: "Highlighter Pack", price: 4.99, img: "assets/highlighters.jpg" }
];

function updateCartCount() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
    document.getElementById("cart-count").innerText = totalQty;
}

// Render order summary
function renderOrderSummary() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    if (cart.length === 0) {
        document.getElementById("order-summary").innerHTML = "<p>Your cart is empty.</p>";
        return;
    }

    let total = 0;
    const summaryHtml = cart.map(item => {
        const product = products[item.id];
        total += product.price * item.qty;
        return `<li>${product.name} x ${item.qty} = $${(product.price * item.qty).toFixed(2)}</li>`;
    }).join('');

    document.getElementById("order-summary").innerHTML = `
        <h3>Order Summary</h3>
        <ul>${summaryHtml}</ul>
        <h4>Total: $${total.toFixed(2)}</h4>
    `;
}

document.getElementById("checkout-form").addEventListener("submit", function(event) {
    event.preventDefault();

    // Simple validation
    const cardNumber = document.getElementById("card-number").value;
    const cvv = document.getElementById("cvv").value;
    if (!/^\d{16}$/.test(cardNumber)) {
        alert("Card number must be 16 digits");
        return;
    }
    if (!/^\d{3,4}$/.test(cvv)) {
        alert("CVV must be 3 or 4 digits");
        return;
    }

    // "Submit" order
    console.log("Order sent:", JSON.parse(localStorage.getItem("cart")));
    localStorage.removeItem("cart");
    updateCartCount();

    document.getElementById("checkout-form").style.display = "none";
    document.getElementById("order-summary").style.display = "none";
    document.getElementById("confirmation").style.display = "block";
});

// Initialize
updateCartCount();
renderOrderSummary();
</script>
</body>
</html>
